## 运行环境

Nignx/Apache/IIS
PHP 7.4
MySQL 5.7

## 一键安装
上传你的代码，站点入口目录设置/public
在浏览器中输入你的域名或IP（例如：www.zzwws.cn）,
安装程序会自动执行安装。期间系统会提醒你输入数据库信息以完成安装，安装完成后建议删除install目录下index.php文件或将其改名。

后台访问地址：
1.域名/admin

安装过程中请牢记您的账号密码！

## 重新安装
1. 清除数据库
2. 删除/public/install/install.lock 文件

## 手动安装
1.创建数据库，倒入数据库文件
数据库文件目录/public/install/install.sql
2.修改数据库连接文件
配置文件路径/.env
~~~
APP_DEBUG = false

[APP]
DEFAULT_TIMEZONE = Asia/Shanghai

[DATABASE]
TYPE = mysql
HOSTNAME = 127.0.0.1
DATABASE = root
USERNAME = root
PASSWORD = 123456
HOSTPORT = 3306
CHARSET = utf8
DEBUG = true
PREFIX = zz_

[ZZ]
# 后台登录验证码开关
CAPTCHA=true

# 后台管理员地址后缀名称
ADMIN = admin

# 静态文件路径前缀
STATIC_PATH = /static/admin

[CACHE]
# 默认缓存驱动
DRIVER = file
# 缓存驱动密码
PASSWORD = 

[LANG]
default_lang = zh-cn

~~~
3.修改目录权限（linux系统）777
/public
/runtime
4.后台登录：
http://域名/admin
默认账号：admin 密码：123456

##监控支持范围

微信：pc监控、app监控
支付宝：pc监控，app监控，免挂
QQ：免挂
数字人民币：app监控

##版本说明

2022-9-30 V2.9
1、cookie安全码增加绑定站点根目录，如果与绑定的不一致则会自动修改安全码
2、增加三套支付模板，可自行切换
3、优化获取系统设置信息
4、修复商品名称和网站名称有特殊字符的时候为空，比如emoji表情
5、取消免挂的随机频率
6、增加支付宝转入小钱袋转账类型
7、修复直接访问修改系统设置接口，会把系统设置全部清空
8、更新提示已经修改成当天只会提示一次，如果需要关闭提示请在public/aaa.html，找到admin/index/checkUpdate注释掉就可以了

2022-5-19 V2.8
1、增加后台订单列表的订单id查找
2、增加支付宝支付页PC打开提示停止访问，请重新扫码
3、支付宝免挂通道五必须携带备注订单id参数
4、增加数字人民币
5、增加复制金额按钮
6、文件已加密，增加授权，同一个授权码可以授权5个域名
7、免挂监控频率已改成随机频率（1-60秒）
8、使用免挂通道五，支付宝支付页会提示备注订单id
9、取消苹果手机的默认扫码转账，目前个人转账最稳，没那么容易风控

2022-3-5 V2.7
1、增加支付宝转账关闭按钮，关闭后就是二维码收款不用删除支付宝商户号
2、开启支付宝订单确认页后，跳转按钮也会跳转到确认页
3、增加自动生成安全码，不用在手动设置
4、增加支付页语音播报按钮

2021-12-24 V2.6
1、修复支付宝免挂，目前四个通道可用
2、增加转账类型切换，扫码转账、个人转账（不支持APP监控）
3、通道五在苹果手机上默认使用扫码转账方式，因为不会自动填写备注
4、支付宝支付确认页默认关闭，需要的话自行开启
5、手机上跳转到支付宝付款，只能跳转一次，之后就会被拦截，关闭支付宝再重试就可以正常跳转

2021-12-15 V2.5
1、邮箱发信程序已更换，目前用的会出现收不到邮件的情况
2、邮箱配置信息已加入后台邮箱设置
3、取消log日志，可以把runtime/log文件夹里的全删了
4、支付页和确认付款页已改成PHP，取消loading加载效果
5、首页跳转地址已加入后台
6、SDK支付测试页已更换
7、支付页点击按钮会自动复制金额，微信已改成保存二维码
8、提交补单发起支付一分钟后才能提交

2021-11-6 V2.4
1、增加QQ支付和QQ免挂，只限免挂可用，回调时间5秒内
2、增加支付宝免挂账单通道，回调时间10秒内，不会递增金额，同一时间支付不会掉单
3、如果需要修改回调时间的话，在application/index/controller/Index.php，支付宝找到$aliExecutionTime，QQ找到$qqExecutionTime，修改即可，不能低于默认的时间
4、免挂已加入心跳，不用在另外开启心跳

2021-10-21 V2.3
1、cookie登录验证已修改，修改密码登录都会失效
2、增加自定义后台登录后缀
3、百度浏览器不能唤醒支付宝，在百度浏览器按钮已隐藏
4、解决苹果的百度浏览器出现400的情况
5、增加支付宝订单确认页，填写支付宝商户号后才会有

2021-09-30 V2.2
1、增加更新提示，下次发布新版会有提示
2、增加支付宝免挂，秒回调、多通道，cookie掉了会发邮件通知
3、增加支付页语音播报，微信、支付宝支付页两种颜色
4、cookie登录验证安全性提高，增加随机token值
5、PHP版本已支持5.6以上

2021-09-22 V2.1
1、管理员密码已采用hash值加密
2、修改订单列表样式
3、防刷机制增强，多次发起订单，秒数乘以订单次数
4、增加同一ip最多待支付订单，同一时间能发起多少个待支付订单
5、增加同一ip最多提交补单次数，同一时间能提交多少个补单
6、修复关闭过期订单接口，当tmp_price表里的订单号不存在不会删除的问题
7、修复异步回调和同步回调地址有特殊字符时支付异常
8、邮箱发送处理程序已更换，发送速度更快
9、增加支付页loading效果

2021-09-06 V2.0
1、改成易支付方式
2、增加订单搜索
3、增加支付宝免输入金额
4、增加补单通知
5、修复刷新不出来的bug
6、增加登录验证条件，以防数据库里的user和pass都为空时直接登录的情况
7、修复上传二维码长时间没响应
8、修复同一个商户订单号未完成前不能再次发起支付，并且在同一时间金额不会递增
9、登录验证修改为cookie加密处理
10、增加发起支付时间限制